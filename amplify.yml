version: 0.1
frontend:
  phases:
    preBuild:
      commands:
        - npm install
        - wget https://github.com/git-lfs/git-lfs/releases/download/v3.5.1/git-lfs-linux-amd64-v3.5.1.tar.gz
        - tar -xzf git-lfs-linux-amd64-v3.5.1.tar.gz
        - sudo ./git-lfs-3.5.1/install.sh
        - git lfs install
    build:
      commands:
        - npm run build:local
        - npm run build
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
  rewrites:
    - source: /apps/set-list-drums/<*>
      target: /apps/set-list-drums/index.html
      status: 200
    - source: /apps/pit-data/<*>
      target: /apps/pit-data/index.html
      status: 200
    - source: /<*>
      target: /index.html
      status: 200